<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Redirecting...</title>
  <script>
    // GitHub Pages 404 Redirect Handler
    // This file is automatically served by GitHub Pages for any 404 errors
    // It checks legacy URLs and redirects to new URLs
    
    (function() {
      const currentPath = window.location.pathname;
      
      // Load redirect map and perform redirect
      function handleRedirect() {
        // Check if redirect map is loaded
        if (typeof LEGACY_REDIRECTS === 'undefined') {
          // Wait a bit longer for script to load
          setTimeout(handleRedirect, 100);
          return;
        }
        
        // Check exact match first
        let redirectUrl = LEGACY_REDIRECTS[currentPath];
        
        // Handle wildcard patterns if no exact match
        if (!redirectUrl) {
          // Check for /recipes/{title} pattern -> redirect to /recipes
          if (currentPath.startsWith('/recipes/') && currentPath !== '/recipes') {
            redirectUrl = '/recipes';
          }
          // Check for /recipes-1/{title} pattern -> redirect to /recipes-1
          else if (currentPath.startsWith('/recipes-1/') && currentPath !== '/recipes-1') {
            redirectUrl = '/recipes-1';
          }
        }
        
        if (redirectUrl) {
          // Use absolute URL if redirect is to external site, relative if internal
          const isExternal = redirectUrl.startsWith('http://') || redirectUrl.startsWith('https://');
          const targetUrl = isExternal ? redirectUrl : window.location.origin + redirectUrl;
          
          // Meta refresh for non-JS browsers and SEO (301 redirect signal)
          const meta = document.createElement('meta');
          meta.httpEquiv = 'refresh';
          meta.content = '0;url=' + targetUrl;
          document.head.appendChild(meta);
          
          // JavaScript redirect (faster, preserves browser history)
          window.location.replace(targetUrl);
        } else {
          // No redirect found - show 404 message
          document.body.innerHTML = `
            <div style="text-align: center; padding: 50px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif; max-width: 600px; margin: 0 auto;">
              <h1 style="font-size: 2em; margin-bottom: 0.5em;">404 - Page Not Found</h1>
              <p style="font-size: 1.1em; color: #666; margin-bottom: 1.5em;">The page you're looking for doesn't exist.</p>
              <p><a href="/" style="color: #0066cc; text-decoration: none; font-weight: 500;">‚Üê Return to Home</a></p>
            </div>
          `;
        }
      }
      
      // Start redirect check
      handleRedirect();
    })();
  </script>
  <script src="/js/legacy-redirects.js" defer></script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S6EP25EHF4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-S6EP25EHF4');
</script>
</head>
<body>
  <div style="text-align: center; padding: 50px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;">
    <p>Redirecting...</p>
    <p style="color: #666; font-size: 0.9em;">If you are not redirected automatically, <a href="/" style="color: #0066cc;">click here</a>.</p>
  </div>
</body>
</html>

